<!DOCTYPE html>
<html style='height: 100%'>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>OGE timeline</title>
    <link rel="stylesheet" type="text/css" href="./deps/gantt/codebase/dhtmlxgantt.css">
    <link rel="stylesheet" href="./deps/gantt/codebase/sources/skins/dhtmlxgantt_meadow.css">
    <script src="./deps/gantt/codebase/dhtmlxgantt.js"></script>
    <!-- dhtmlxGantt-Firebase adapter -->
    <script type="text/javascript" src="./deps/firebase-gantt-master/source/dhtmlx_gantt_firebase.js"></script>

    <!-- FireBase -->
    <script src="https://cdn.firebase.com/js/client/2.2.4/firebase.js"></script>
  </head>
  <body style="height:100%">
    <div id="gantt_here" style="width:100%; height:100%;"></div>
    <script>
      gantt.config.xml_date = "%Y-%m-%d %H:%i";
      gantt.config.scales = [
        {unit: "month", step: 1, format: "%F, %Y"},
      ]

      gantt.config.lightbox.sections = [
        {name: "description", height: 70, map_to: "text", type: "textarea"},
        {name: "type", type: "typeselect", map_to: "type"},
        {name: "time", height: 72, type: "duration", map_to: "auto"}
      ];

      gantt.templates.rightside_text = function(start, end, task){
        if(task.type == gantt.config.types.milestone){
          return task.text;
        }
        return "";
      };
      gantt.config.order_branch = true;

      gantt.init("gantt_here");

      <!-- var data = new Firebase("https://oge-timeline.firebaseio.com/"); -->
      <!-- gantt.firebase({tasks: data.child("tasks"), links: data.child("links")}); -->

      gantt.parse({
        data: [
          {id: 1, text: "Foncier",  parent:0, open: true},

          {id: 2, text: "Acquerir Le milloret", parent:1, open: true},
          {id: 6, text: "Faire une offre", type: "milestone", start_date: "2020-05-01", duration: 1, parent:2, progress: 1, open: true},
          {id: 3, text: "Signature du compromis", type: "milestone", start_date: "2020-06-01", duration:0, parent:2, progress: 0, open: true},
          {id: 4, text: "Architecte realise les plans et les donnees techniques a fournir aux entreprises", start_date: "2020-06-01", duration: 60, parent: 2, progress: 0},
          {id: 5, text: "Demande officielle du permis de construire", start_date: "2020-08-01", duration:60, parent:2, progress: 0},
          {id: 7, text: "Retour de l'administration", start_date: "2020-10-01", parent:2, progress: 0},


          {id: 50, text: "Bati", start_date: "2021-01-01", duration: 700,  parent:1, open: true},
          {id: 51, text: "Commander les materiaux", parent:50, open: true},

          {id: 100, text: "Agriculture", start_date: "2021-01-01", duration:100, parent:0, progress: 0, open: true},
          {id: 101, text: "Achat et installation des serres", start_date: "2021-01-01", duration:30, parent:100, progress: 0},
        ],
        links:[
          {id:1, source:4, target:5, type:"0"},
          {id:2, source:5, target:7, type:"0"},
          <!-- {id:3, source:5, target:6, type:"0"} -->
        ]
      });
    </script>
  </body>

</html>
